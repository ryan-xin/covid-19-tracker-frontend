(this["webpackJsonpcovid-19-tracker-frontend"]=this["webpackJsonpcovid-19-tracker-frontend"]||[]).push([[0],{135:function(e,t){},217:function(e,t,a){},218:function(e,t,a){},219:function(e,t,a){},220:function(e,t,a){},221:function(e,t,a){},222:function(e,t,a){},223:function(e,t,a){},224:function(e,t,a){},225:function(e,t,a){},226:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(9),o=a(80),r=a.n(o),i=a(2),s=a(7),m=a(4),u=a.n(m),d=a(81),p=a.n(d),E=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),m=s[0],d=s[1],p=Object(n.useState)(""),E=Object(i.a)(p,2),b=E[0],h=E[1];return l.a.createElement("div",{className:"content"},l.a.createElement("h1",null,"User Login"),l.a.createElement("form",null,l.a.createElement("label",null,"Email:"),l.a.createElement("input",{type:"text",onChange:function(e){o(e.target.value)}}),l.a.createElement("label",null,"Password:"),l.a.createElement("input",{type:"text",onChange:function(e){d(e.target.value)}}),l.a.createElement("input",{type:"Submit",placeholder:"Login",className:"button_primary",onClick:function(t){t.preventDefault(),localStorage.removeItem("user"),localStorage.removeItem("admin"),localStorage.removeItem("token"),console.log("Login Submitted"),u.a.post("http://localhost:1337/user/login",{email:c,password:m}).then((function(t){console.log(t.data),localStorage.setItem("user",JSON.stringify(t.data.user)),localStorage.setItem("token",t.data.token),u.a.defaults.headers.common.Authorization="Bearer ".concat(t.data.token),e.history.push("/world"),window.location.reload()})).catch((function(e){console.log(e),401===e.response.status&&h("Invalid email and/or password.")}))}})),l.a.createElement("div",{className:"errorMessage"},l.a.createElement("p",null,b)))},b=a(19),h=a(6),g=a(82),v=function(e){var t,a=Object(n.useState)([]),c=Object(i.a)(a,2),o=c[0],r=c[1],s=Object(n.useState)(""),m=Object(i.a)(s,2),d=m[0],p=m[1],E=Object(n.useState)([]),b=Object(i.a)(E,2),h=b[0],g=b[1],v=Object(n.useState)(!1),f=Object(i.a)(v,2),y=f[0],O=f[1],S=Object(n.useState)(void 0),j=Object(i.a)(S,2),w=j[0],N=j[1],C=function(t){p(t.target.innerText),e.onSelectSuburb(t.target.innerText),g([]),O(!1)};return Object(n.useEffect)((function(){N(e.preSuburb)}),[e.preSuburb]),Object(n.useEffect)((function(){u.a.get("http://localhost:1337/suburbs").then((function(e){console.log(e.data),r(e.data)})).catch((function(e){return console.log(e)}))}),[]),y&&d&&(t=h.length?l.a.createElement("div",{className:"auto_list_outer"},l.a.createElement("div",{className:"auto_list_inner"},l.a.createElement("ul",{className:"options"},h.map((function(e,t){return l.a.createElement("li",{key:e,onClick:C},e)}))))):l.a.createElement("div",{className:"errorMessage"},l.a.createElement("p",null,"No Option!"))),l.a.createElement("div",{className:"auto_wrapper"},l.a.createElement("div",{className:"search"},l.a.createElement("input",{type:"text",className:"search-box",onChange:function(e){console.log("onChanges");var t=e.target.value,a=o.filter((function(e){return e.toLowerCase().indexOf(t.toLowerCase())>-1}));p(t),g(a),O(!0)},onClick:function(e){N("")},value:w||d})),t)},f=function(e){var t=Object(n.useState)({name:"",email:"",password:"",confirmPassword:"",suburb:""}),a=Object(i.a)(t,2),c=a[0],o=a[1],r=Object(n.useState)({blankField:"",email:"",password:"",passwordLength:"",existingEmail:""}),s=Object(i.a)(r,2),m=s[0],d=s[1],p=function(e){var t=e.target.value;o(Object(h.a)(Object(h.a)({},c),{},Object(b.a)({},e.target.name,t)))};return l.a.createElement("div",{className:"content"},l.a.createElement("h1",null,"User Signup"),l.a.createElement("form",null,l.a.createElement("label",null,"Name:"),l.a.createElement("input",{type:"text",name:"name",onChange:p}),l.a.createElement("label",null,"Email:"),l.a.createElement("input",{type:"text",name:"email",onChange:p}),l.a.createElement("label",null,"Password:"),l.a.createElement("input",{type:"text",name:"password",onChange:p}),l.a.createElement("label",null,"Confirm Password:"),l.a.createElement("input",{type:"text",name:"confirmPassword",onChange:p}),l.a.createElement("label",null,"Suburb:"),l.a.createElement(v,{onSelectSuburb:function(e){o(Object(h.a)(Object(h.a)({},c),{},{suburb:e}))}}),l.a.createElement("input",{type:"Submit",placeholder:"Login",className:"button_primary",onClick:function(t){t.preventDefault(),function(){d({blankField:"",email:"",password:"",passwordLength:"",existingEmail:""}),console.log("Signup Submitted");var e={},t=!0;return""!==c.name&&""!==c.email&&""!==c.password&&""!==c.suburb||(e.blankField='Fields can"t be blank.',t=!1),Object(g.isEmail)(c.email)||(e.email="Invalid email.",t=!1),c.password.length<6&&(e.passwordLength="Password must at least 6 characters.",t=!1),c.password!==c.confirmPassword&&(e.password="Please make sure your passwords match.",t=!1),t||d(e),t}()&&u.a.post("http://localhost:1337/user/signup",{name:c.name,email:c.email,password:c.password,suburb:c.suburb}).then((function(t){console.log(t.data),localStorage.setItem("user",JSON.stringify(t.data.user)),localStorage.setItem("token",t.data.token),u.a.defaults.headers.common.Authorization="Bearer ".concat(t.data.token),e.history.push("/world"),window.location.reload()})).catch((function(e){console.dir(e),401===e.response.status&&(console.log(e.response.data.email),d({existingEmail:e.response.data.email}))}))}})),l.a.createElement("div",{className:"errorMessage"},l.a.createElement("p",null,m.blankField),l.a.createElement("p",null,m.email),l.a.createElement("p",null,m.password),l.a.createElement("p",null,m.passwordLength),l.a.createElement("p",null,m.existingEmail)))},y=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],r=Object(n.useState)(""),s=Object(i.a)(r,2),m=s[0],d=s[1],p=Object(n.useState)(""),E=Object(i.a)(p,2),b=E[0],h=E[1];return l.a.createElement("div",{className:"content"},l.a.createElement("h1",null,"Admin Login"),l.a.createElement("form",null,l.a.createElement("label",null,"Email:"),l.a.createElement("input",{type:"text",onChange:function(e){o(e.target.value)}}),l.a.createElement("label",null,"Password:"),l.a.createElement("input",{type:"text",onChange:function(e){d(e.target.value)}}),l.a.createElement("input",{type:"Submit",placeholder:"Login",className:"button_primary",onClick:function(t){t.preventDefault(),localStorage.removeItem("user"),localStorage.removeItem("admin"),localStorage.removeItem("token"),console.log("Login Submitted"),u.a.post("http://localhost:1337/admin/login",{email:c,password:m}).then((function(t){console.log(t.data),localStorage.setItem("admin",JSON.stringify(t.data.admin)),localStorage.setItem("token",t.data.token),u.a.defaults.headers.common.Authorization="Bearer ".concat(t.data.token),e.history.push("/admin/profile/".concat(t.data.admin._id)),window.location.reload()})).catch((function(e){console.log(e),401===e.response.status&&h("Invalid email and/or password.")}))}})),l.a.createElement("div",{className:"errorMessage"},l.a.createElement("p",null,b)))},O=a(228),S=a(230),j=a(229),w=function(e){return l.a.createElement("div",{className:"thank_you"},l.a.createElement("div",{className:"thank_you_wrapper"},l.a.createElement("h4",null," To all healthcare workers who were on the frontlines of ",l.a.createElement("br",null)," battling COVID - 19: "),l.a.createElement("h1",null,"Thank You to Our Heros!"),l.a.createElement("h3",null,"Thank you for the sacrifices you make, every day and especially during this pandemic. Your dedication, commitment and courage deserve our deepest gratitude and admiration. Your service to patients is saving countless lives and making thousands of differences. "),l.a.createElement("button",{className:"button_thankyou",onClick:function(){e.onHandleThankYou()}},"Thank You!")))},N=function(e){var t=Object(n.useState)({cases:"-",todayCases:"-",active:"-",deaths:"-",recovered:"-",affectedCountries:"-",updated:"-"}),a=Object(i.a)(t,2),c=a[0],o=a[1],r=Object(n.useState)(!1),s=Object(i.a)(r,2),m=s[0],d=s[1];Object(n.useEffect)((function(){u.a.get("https://disease.sh/v3/covid-19/all").then((function(e){console.log(e.data),0===e.data.cases&&d(!0),o({cases:p(e.data.cases),todayCases:p(e.data.todayCases),active:p(e.data.active),deaths:p(e.data.deaths),recovered:p(e.data.recovered),affectedCountries:p(e.data.affectedCountries),updated:new Date(e.data.updated).toLocaleString()})})).catch((function(e){console.log(e)}))}),[]);var p=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")};return l.a.createElement("div",null,m&&l.a.createElement(w,{onHandleThankYou:function(){d(!1)}}),l.a.createElement("div",{className:"dashboard"},l.a.createElement("div",{className:"dashboard_wrapper"},l.a.createElement("div",{className:"update_time"},l.a.createElement("p",null,"Last Update:"),l.a.createElement("h5",null,c.updated)),l.a.createElement("div",{className:"flex-container"},l.a.createElement("div",{className:"flex-item"},l.a.createElement("h4",null,"Total Cases"),l.a.createElement("h1",null,c.cases)),l.a.createElement("div",{className:"flex-item"},l.a.createElement("h4",null,"Today Cases"),l.a.createElement("h1",null,c.todayCases)),l.a.createElement("div",{className:"flex-item"},l.a.createElement("h4",null,"Active Cases"),l.a.createElement("h1",null,c.active))),l.a.createElement("div",{className:"flex-container"},l.a.createElement("div",{className:"flex-item"},l.a.createElement("h4",null,"Deaths"),l.a.createElement("h1",null,c.deaths)),l.a.createElement("div",{className:"flex-item"},l.a.createElement("h4",null,"Recovered"),l.a.createElement("h1",null,c.recovered)),l.a.createElement("div",{className:"flex-item"},l.a.createElement("h4",null,"Affected Countries"),l.a.createElement("h1",null,c.affectedCountries))))))},C=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=(a[0],a[1]),o=Object(n.useState)([]),r=Object(i.a)(o,2),s=r[0],m=r[1],d=Object(n.useState)(void 0),p=Object(i.a)(d,2),E=p[0],b=p[1],h=Object(n.useState)({name:"-",cases:"-",todayCases:"-",deaths:"-",recovered:"-",active:"-",updated:"-"}),g=Object(i.a)(h,2),v=g[0],f=g[1];Object(n.useEffect)((function(){console.log("useEffect"),u.a.get("https://disease.sh/v3/covid-19/countries").then((function(e){console.log(e.data),c(e.data);var t={};e.data.forEach((function(e){var a=e.country;t[a]={},t[a].cases=e.cases,t[a].todayCases=e.todayCases,t[a].deaths=e.deaths,t[a].recovered=e.recovered,t[a].active=e.active,t[a].updated=e.updated})),b(t)})).catch((function(e){console.log(e)}))}),[]),Object(n.useEffect)((function(){u.a.get("http://localhost:1337/countries").then((function(e){console.log(e.data),m(e.data)})).catch((function(e){console.log(e)}))}),[]);var y=function(e){return e>7e5?"#4E1504":e>5e5?"#7F270C":e>3e5?"#B33A15":e>1e5?"#E54C1E":e>5e4?"#FF5F1D":e>2e4?"#FF7014":e>1e4?"#FE8209":e>5e3?"#FE9003":e>2e3?"#FEB351":e>1e3?"#FECB88":"#FFECD3"},w=function(e){e.target.setStyle({weight:2,fillOpacity:.6})},C=function(e){e.target.setStyle({weight:1,fillOpacity:.5})},k=function(e){console.log(e.sourceTarget.options.id);var t=e.sourceTarget.options.id;E[t]?f({name:t,cases:_(E[t].cases),todayCases:_(E[t].todayCases),deaths:_(E[t].deaths),recovered:_(E[t].recovered),active:_(E[t].active),updated:new Date(E[t].updated).toLocaleString()}):f({name:t,cases:"Date unavailable",todayCases:"Date unavailable",deaths:"Date unavailable",recovered:"Date unavailable",active:"Date unavailable",updated:"Date unavailable"})},_=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")};return l.a.createElement("div",null,l.a.createElement("div",{className:"map_container"},l.a.createElement(O.a,{center:[15,25],zoom:3},l.a.createElement(S.a,{url:"https://api.mapbox.com/styles/v1/ryanxin/ckfdup3bt0d5p19rtln7yawiw/tiles/256/{z}/{x}/{y}@2x?access_token=pk.eyJ1IjoicnlhbnhpbiIsImEiOiJja2ZkdTFhajQwNDh6MnRzaG51ZHFsenByIn0.eqvLzhrjtwg78imgHDi6SQ",attribution:'Map data \xa9 <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery \xa9 <a href="https://www.mapbox.com/">Mapbox</a>'}),E&&s.map((function(e){return l.a.createElement(j.a,{key:e.properties.admin,id:e.properties.admin,data:e,style:(t=e.properties.admin,E[t]?{fillColor:y(E[t].cases),weight:1,opacity:.6,color:"white",dashArray:"3",fillOpacity:.5}:{fillColor:y(0),weight:1,opacity:.6,color:"white",dashArray:"3",fillOpacity:.5}),onMouseOver:w,onMouseOut:C,onClick:k});var t}))),l.a.createElement("div",{className:"stats_panel"},l.a.createElement("p",null,"Country:"),l.a.createElement("h4",null,v.name),l.a.createElement("p",null,"Cases:"),l.a.createElement("h4",null,v.cases),l.a.createElement("p",null,"Today Cases:"),l.a.createElement("h4",null,v.todayCases),l.a.createElement("p",null,"Deaths:"),l.a.createElement("h4",null,v.deaths),l.a.createElement("p",null,"Recovered:"),l.a.createElement("h4",null,v.recovered),l.a.createElement("p",null,"Active:"),l.a.createElement("h4",null,v.active),l.a.createElement("p",null,"Last Updated:"),l.a.createElement("h4",null,v.updated)),l.a.createElement(N,null)))},k=a(227),_=a(8),T=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],o=a[1],r=Object(n.useState)({lat:0,lng:0}),s=Object(i.a)(r,2),m=s[0],d=s[1],p=Object(n.useState)({suburb:"-",location:"-",day:"-",month:"-",year:"-",startTime:"-",endTime:"-"}),E=Object(i.a)(p,2),b=E[0],g=E[1],v=new _.Icon({iconUrl:"/caseIcon.svg",iconSize:[40,40]}),f=new _.Icon({iconUrl:"/userIcon.svg",iconSize:[50,50]}),y=function(e){console.log("Clicked"),u.a.get("".concat("http://localhost:1337/cases","/").concat(e.sourceTarget.options.id)).then((function(e){console.log(e.data.singleCase);var t=e.data.singleCase;g(Object(h.a)(Object(h.a)({},b),{},{suburb:t.suburb,location:t.location,day:t.day,month:t.month,year:t.year,startTime:t.startTime,endTime:t.endTime}))})).catch((function(e){return console.log(e)}))};return Object(n.useEffect)((function(){u.a.get("http://localhost:1337/cases").then((function(e){console.log(e.data),o(e.data)})).catch((function(e){return console.log(e)}))}),[c.length]),Object(n.useEffect)((function(){window.navigator.geolocation&&window.navigator.geolocation.getCurrentPosition((function(e){d({lat:e.coords.latitude,lng:e.coords.longitude})}),console.log)}),[]),l.a.createElement("div",null,l.a.createElement("div",{className:"map_container"},l.a.createElement(O.a,{center:[m.lat,m.lng],zoom:13},l.a.createElement(S.a,{url:"https://api.mapbox.com/styles/v1/ryanxin/ckfdup3bt0d5p19rtln7yawiw/tiles/256/{z}/{x}/{y}@2x?access_token=pk.eyJ1IjoicnlhbnhpbiIsImEiOiJja2ZkdTFhajQwNDh6MnRzaG51ZHFsenByIn0.eqvLzhrjtwg78imgHDi6SQ",attribution:'Map data \xa9 <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery \xa9 <a href="https://www.mapbox.com/">Mapbox</a>'}),c.map((function(e){return l.a.createElement(k.a,{key:e.location,position:[e.lat,e.lng],icon:v,id:e._id,onClick:y})})),l.a.createElement(k.a,{icon:f,position:[m.lat,m.lng]})),l.a.createElement("div",{className:"stats_panel"},l.a.createElement("p",null,l.a.createElement("strong",null,"Suburb: ")),l.a.createElement("h4",null,b.suburb),l.a.createElement("p",null,l.a.createElement("strong",null,"Location: ")),l.a.createElement("h4",null,b.location),l.a.createElement("p",null,l.a.createElement("strong",null,"Date: ")),l.a.createElement("h4",null,b.day," ",b.month," ",b.year),l.a.createElement("p",null,l.a.createElement("strong",null,"Time:")),l.a.createElement("h4",null,"From ",b.startTime,l.a.createElement("strong",null," to "),b.endTime))))},x=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){u.a.get("http://localhost:1337/cases").then((function(e){console.log(e.data),o(e.data)})).catch((function(e){return console.log(e)}))}),[c.length]),l.a.createElement("div",null,l.a.createElement("h1",null,"All New Cases"),l.a.createElement("div",{className:"container header"},l.a.createElement("div",null,"Suburb"),l.a.createElement("div",null,"Location"),l.a.createElement("div",null,"Date"),l.a.createElement("div",null,"Time")),c.reverse().map((function(e){return l.a.createElement("div",{className:"container result"},l.a.createElement("div",null,e.suburb),l.a.createElement("div",null,e.location),l.a.createElement("div",null,e.day),l.a.createElement("div",null,e.startTime))})))},F=a(29),I=function(e){var t=Object(F.a)({requestOptions:{},debounce:300}),a=t.ready,c=t.value,o=t.suggestions,r=o.status,s=o.data,m=t.setValue,u=t.clearSuggestions,d=Object(n.useState)(void 0),p=Object(i.a)(d,2),E=p[0],b=p[1],h=function(t){var a=t.description;return function(){m(a,!1),u(),Object(F.b)({address:a}).then((function(e){return Object(F.c)(e[0])})).then((function(t){var n=t.lat,l=t.lng;console.log(a),console.log("Coordinates: ",{lat:n,lng:l}),e.onSelectLocation(a,n,l)})).catch((function(e){console.log("Error: ",e)}))}};return Object(n.useEffect)((function(){b(e.preLocation)}),[e.preLocation]),l.a.createElement("div",{className:"auto_wrapper"},l.a.createElement("div",{className:"search"},l.a.createElement("input",{value:E||c,onChange:function(e){m(e.target.value)},onClick:function(e){b("")},disabled:!a,placeholder:"e.g. Shopping Mall"})),"OK"===r&&l.a.createElement("div",{className:"auto_list_outer"},l.a.createElement("div",{className:"auto_list_inner"},l.a.createElement("ul",null,s.map((function(e){var t=e.id,a=e.structured_formatting,n=a.main_text,c=a.secondary_text;return l.a.createElement("li",{key:t,onClick:h(e)},l.a.createElement("strong",null,n)," ",l.a.createElement("small",null,c))}))))))},L=function(e){var t=Object(n.useState)({suburb:"",location:"",day:"",month:"",year:"",startTime:"",endTime:"",lat:"",lng:"",suburbs:[]}),a=Object(i.a)(t,2),c=a[0],o=a[1],r=Object(n.useState)({blankField:"",dayFormat:"",yearFormat:"",timeFormat:""}),s=Object(i.a)(r,2),m=s[0],d=s[1],p=function(e){var t=e.target.value;o(Object(h.a)(Object(h.a)({},c),{},Object(b.a)({},e.target.name,t)))};return l.a.createElement("div",{className:"content"},l.a.createElement("h1",null,"Create New Case"),l.a.createElement("form",null,l.a.createElement("label",null,"Suburb:"),l.a.createElement(v,{onSelectSuburb:function(e){o(Object(h.a)(Object(h.a)({},c),{},{suburb:e}))}}),l.a.createElement("label",null,"Location:"),l.a.createElement(I,{onSelectLocation:function(e,t,a){o(Object(h.a)(Object(h.a)({},c),{},{location:e,lat:t,lng:a}))}}),l.a.createElement("div",{className:"form_container"},l.a.createElement("div",{className:"form_container_item"},l.a.createElement("label",null,"Day:"),l.a.createElement("input",{type:"text",name:"day",placeholder:"e.g. 11",onChange:p})),l.a.createElement("div",{className:"form_container_item"},l.a.createElement("label",null,"Month:"),l.a.createElement("select",{type:"text",name:"month",placeholder:"e.g. January",onChange:p},l.a.createElement("option",{value:""},"Select..."),l.a.createElement("option",{value:"January"},"January"),l.a.createElement("option",{value:"February"},"February"),l.a.createElement("option",{value:"March"},"March"),l.a.createElement("option",{value:"April"},"April"),l.a.createElement("option",{value:"May"},"May"),l.a.createElement("option",{value:"June"},"June"),l.a.createElement("option",{value:"July"},"July"),l.a.createElement("option",{value:"August"},"August"),l.a.createElement("option",{value:"September"},"September"),l.a.createElement("option",{value:"October"},"October"),l.a.createElement("option",{value:"November"},"November"),l.a.createElement("option",{value:"December"},"December"))),l.a.createElement("div",{className:"form_container_item"},l.a.createElement("label",null,"Year:"),l.a.createElement("input",{type:"text",name:"year",placeholder:"e.g. 2020",onChange:p}))),l.a.createElement("div",{className:"form_container"},l.a.createElement("div",{className:"form_container_item"},l.a.createElement("label",null,"Start Time:"),l.a.createElement("input",{type:"text",name:"startTime",placeholder:"e.g. 11:00am",onChange:p})),l.a.createElement("div",{className:"form_container_item"},l.a.createElement("label",null,"End Time:"),l.a.createElement("input",{type:"text",name:"endTime",placeholder:"e.g. 2:00pm",onChange:p}))),l.a.createElement("input",{type:"Submit",class:"button_primary",placeholder:"Create",onClick:function(t){t.preventDefault(),console.log("Case create submitted"),function(e){d({blankField:"",dayFormat:"",yearFormat:"",timeFormat:""});var t={},a=!0;""!==c.suburb&&""!==c.location&&""!==c.day&&""!==c.month&&""!==c.year&&""!==c.startTime&&""!==c.endTime||(t.blankField='Fields can"t be blank.',a=!1);/\b([1-9]|[12][0-9]|3[01])\b/.test(c.day)||(t.dayFormat="Invalid date field format.",a=!1);/\b^[2][0]\d{2}\b/.test(c.year)||(t.yearFormat="Invalid year field format.",a=!1);var n=/\b(1[012]|[1-9]):[0-5][0-9](am|pm)$\b/;return n.test(c.startTime)&&n.test(c.endTime)||(t.timeFormat="Invalid time field format.",a=!1),a||d(t),a}()&&u.a.post("http://localhost:1337/cases/create",{suburb:c.suburb,location:c.location,day:c.day,month:c.month,year:c.year,startTime:c.startTime,endTime:c.endTime,lat:c.lat,lng:c.lng}).then((function(t){console.log(t.data);var a=JSON.parse(localStorage.getItem("admin"));e.history.push("/admin/profile/".concat(a._id))})).catch((function(e){return console.log(e)}))}})),l.a.createElement("div",{className:"errorMessage"},l.a.createElement("p",null,m.blankField),l.a.createElement("p",null,m.dayFormat),l.a.createElement("p",null,m.yearFormat),l.a.createElement("p",null,m.timeFormat)))},D=function(e){var t=Object(n.useState)({suburb:"",location:"",day:"",month:"",year:"",startTime:"",endTime:"",lat:"",lng:"",suburbs:[]}),a=Object(i.a)(t,2),c=a[0],o=a[1],r=Object(n.useState)({blankField:"",dayFormat:"",yearFormat:"",timeFormat:""}),s=Object(i.a)(r,2),m=s[0],d=s[1],p=function(e){var t=e.target.value;o(Object(h.a)(Object(h.a)({},c),{},Object(b.a)({},e.target.name,t)))};return Object(n.useEffect)((function(){console.log(e.match.params.caseId),u.a.get("".concat("http://localhost:1337/cases","/").concat(e.match.params.caseId)).then((function(e){console.log(e.data.singleCase);var t=e.data.singleCase;o(Object(h.a)(Object(h.a)({},c),{},{suburb:t.suburb,location:t.location,day:t.day,month:t.month,year:t.year,startTime:t.startTime,endTime:t.endTime,lat:t.lat,lng:t.lng}))})).catch((function(e){return console.log(e)}))}),[]),l.a.createElement("div",{className:"content"},l.a.createElement("h1",null,"Edit Case"),l.a.createElement("form",null,l.a.createElement("label",null,"Suburb:"),l.a.createElement(v,{onSelectSuburb:function(e){o(Object(h.a)(Object(h.a)({},c),{},{suburb:e}))},preSuburb:c.suburb}),l.a.createElement("label",null,"Location:"),l.a.createElement(I,{onSelectLocation:function(e,t,a){o(Object(h.a)(Object(h.a)({},c),{},{location:e,lat:t,lng:a}))},preLocation:c.location}),l.a.createElement("div",{className:"form_container"},l.a.createElement("div",{className:"form_container_item"},l.a.createElement("label",null,"Day:"),l.a.createElement("input",{type:"text",name:"day",placeholder:"e.g. 11",onChange:p,defaultValue:c.day})),l.a.createElement("div",{className:"form_container_item"},l.a.createElement("label",null,"Month:"),l.a.createElement("select",{type:"text",name:"month",value:c.month,placeholder:"e.g. January",onChange:p},l.a.createElement("option",{value:""},"Select..."),l.a.createElement("option",{value:"January"},"January"),l.a.createElement("option",{value:"February"},"February"),l.a.createElement("option",{value:"March"},"March"),l.a.createElement("option",{value:"April"},"April"),l.a.createElement("option",{value:"May"},"May"),l.a.createElement("option",{value:"June"},"June"),l.a.createElement("option",{value:"July"},"July"),l.a.createElement("option",{value:"August"},"August"),l.a.createElement("option",{value:"September"},"September"),l.a.createElement("option",{value:"October"},"October"),l.a.createElement("option",{value:"November"},"November"),l.a.createElement("option",{value:"December"},"December"))),l.a.createElement("div",{className:"form_container_item"},l.a.createElement("label",null,"Year:"),l.a.createElement("input",{type:"text",name:"year",placeholder:"e.g. 2020",onChange:p,defaultValue:c.year}))),l.a.createElement("div",{className:"form_container"},l.a.createElement("div",{className:"form_container_item"},l.a.createElement("label",null,"Start Time:"),l.a.createElement("input",{type:"text",name:"startTime",placeholder:"e.g. 11:00am",onChange:p,defaultValue:c.startTime})),l.a.createElement("div",{div:!0,className:"form_container_item"},l.a.createElement("label",null,"End Time:"),l.a.createElement("input",{type:"text",name:"endTime",placeholder:"e.g. 2:00pm",onChange:p,defaultValue:c.endTime}))),l.a.createElement("input",{type:"Submit",className:"button_primary",placeholder:"Create",onClick:function(t){t.preventDefault(),function(e){d({blankField:"",dayFormat:"",yearFormat:"",timeFormat:""}),console.log("Case create submitted");var t={},a=!0;""!==c.suburb&&""!==c.location&&""!==c.day&&""!==c.month&&""!==c.year&&""!==c.startTime&&""!==c.endTime||(t.blankField='Fields can"t be blank.',a=!1);/\b([1-9]|[12][0-9]|3[01])\b/.test(c.day)||(t.dayFormat="Invalid date field format.",a=!1);/\b^[2][0]\d{2}\b/.test(c.year)||(t.yearFormat="Invalid year field format.",a=!1);var n=/\b(1[012]|[1-9]):[0-5][0-9](am|pm)$\b/;return n.test(c.startTime)&&n.test(c.endTime)||(t.timeFormat="Invalid time field format.",a=!1),a||d(t),a}()&&u.a.post("http://localhost:1337/cases/edit",{suburb:c.suburb,location:c.location,day:c.day,month:c.month,year:c.year,startTime:c.startTime,endTime:c.endTime,lat:c.lat,lng:c.lng,caseId:e.match.params.caseId}).then((function(t){console.log(t.data);var a=JSON.parse(localStorage.getItem("admin"));e.history.push("/admin/profile/".concat(a._id))})).catch((function(e){return console.log(e)})),console.log("Edit case executed")}})),l.a.createElement("div",{className:"errorMessage"},l.a.createElement("p",null,m.blankField),l.a.createElement("p",null,m.dayFormat),l.a.createElement("p",null,m.yearFormat),l.a.createElement("p",null,m.timeFormat)))},A=function(e){var t=Object(n.useState)({}),a=Object(i.a)(t,2),o=a[0],r=a[1],s=Object(n.useState)([]),m=Object(i.a)(s,2),d=m[0],p=m[1],E=function(e){console.log("Delete case executed"),console.log(e.target.id),console.log(o._id),u.a.post("http://localhost:1337/cases/delete",{caseId:e.target.id,adminId:o._id}).then((function(e){console.log(e.data),p(e.data.cases)})).catch((function(e){return console.log(e)}))};return Object(n.useEffect)((function(){u.a.get("".concat("http://localhost:1337/admin/profile","/").concat(e.match.params.adminId)).then((function(e){console.log(e.data),r(e.data.admin),p(e.data.cases)})).catch((function(e){return console.log(e)}))}),[]),l.a.createElement("div",{className:"admin_cases"},l.a.createElement("div",{className:"admin_header"},l.a.createElement("h1",null,"Admin Cases"),l.a.createElement(c.b,{className:"button_secondary button_addcase",to:"/cases/create"},"Add Case")),l.a.createElement("div",{className:"table header"},l.a.createElement("div",null,"Suburb"),l.a.createElement("div",null,"Location"),l.a.createElement("div",null,"Date"),l.a.createElement("div",null,"Time"),l.a.createElement("div",null),l.a.createElement("div",null)),d.reverse().map((function(e){return l.a.createElement("div",{key:e._id,className:"table row"},l.a.createElement("div",null,e.suburb),l.a.createElement("div",null,e.location),l.a.createElement("div",null,e.day," ",e.month," ",e.year),l.a.createElement("div",null,e.startTime," - ",e.endTime),l.a.createElement(c.b,{className:"button_third",to:"/cases/edit/".concat(e._id)},"Edit"),l.a.createElement("div",{id:e._id,className:"button_third",onClick:E},"Delete"))})))},J=a(84),M=function(e){var t=e.component,a=Object(J.a)(e,["component"]);return l.a.createElement(s.b,Object.assign({},a,{render:function(e){return localStorage.getItem("token")?l.a.createElement(t,e):l.a.createElement(s.a,{to:"/user/login"})}}))},B=function(e){var t=Object(n.useState)(void 0),a=Object(i.a)(t,2),o=a[0],r=a[1],m=Object(n.useState)(void 0),d=Object(i.a)(m,2),b=d[0],h=d[1],g=Object(n.useState)(!1),v=Object(i.a)(g,2),O=v[0],S=v[1],j=Object(n.useState)(!1),N=Object(i.a)(j,2),k=N[0],_=N[1],F=Object(n.useState)(""),I=Object(i.a)(F,2),J=I[0],B=I[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("token");e&&(console.log("Use stored token",e),u.a.defaults.headers.common.Authorization="Bearer ".concat(e)),S(!0);var t=JSON.parse(localStorage.getItem("user"));t&&r(t);var a=JSON.parse(localStorage.getItem("admin"));a&&h(a);var n=p()("http://localhost:1337");n.on("connect",(function(){console.log("Websocket connection established!")})),n.on("notification",(function(e){console.log("notification",e),_(!0),B(e.case)}))}),[]),l.a.createElement("div",null,O&&l.a.createElement("div",{className:"main_wrapper"},l.a.createElement(c.a,null,l.a.createElement("nav",null,l.a.createElement("div",{className:"nav_wrapper"},l.a.createElement("div",{className:"nav_left"},l.a.createElement(c.b,{to:"/world"},l.a.createElement("img",{src:"/logo.svg",alt:"logo",className:"logo"}))),l.a.createElement("div",{className:"nav_right"},l.a.createElement("ul",null,o||b?l.a.createElement("div",null,l.a.createElement("li",null,l.a.createElement(c.b,{to:"/world"},"World Cases")),l.a.createElement("li",null,l.a.createElement(c.b,{to:"/sydney"},"Nearby Cases")),b&&l.a.createElement("li",null,l.a.createElement(c.b,{to:"/admin/profile/".concat(b._id)},"Your Cases")),l.a.createElement("li",null,l.a.createElement("a",{href:"/logout",onClick:function(e){localStorage.removeItem("user"),localStorage.removeItem("admin"),localStorage.removeItem("token")}},"Logout"))):l.a.createElement("div",null,l.a.createElement("li",null,l.a.createElement(c.b,{to:"/user/login"},"Login")),l.a.createElement("li",null,l.a.createElement(c.b,{to:"/user/signup"},"Sign Up"))))))),l.a.createElement(M,{exact:!0,path:["/","/world"],component:C}),l.a.createElement(M,{exact:!0,path:"/sydney",component:T}),l.a.createElement(s.b,{exact:!0,path:"/user/login",component:E}),l.a.createElement(s.b,{exact:!0,path:"/user/signup",component:f}),l.a.createElement(s.b,{exact:!0,path:"/admin/login",component:y}),l.a.createElement(M,{exact:!0,path:"/admin/profile/:adminId",component:A}),l.a.createElement(M,{exact:!0,path:"/cases",component:x}),l.a.createElement(M,{exact:!0,path:"/cases/create",component:L}),l.a.createElement(M,{exact:!0,path:"/cases/edit/:caseId",component:D}),l.a.createElement(s.b,{exact:!0,path:"/thankyoutoourheros",component:w}),l.a.createElement("footer",null,l.a.createElement("div",{className:"footer_wrapper"},l.a.createElement("div",{className:"footer_left"},l.a.createElement("ul",null,l.a.createElement("li",null,"Copyright \xa9 2020 GA-SEI 37 by Ryan Xin"),l.a.createElement("li",null,l.a.createElement("a",{target:"_blank",href:"https://www.linkedin.com/in/ryan-xin/"},"LinkedIn")),l.a.createElement("li",null,l.a.createElement("a",{target:"_blank",href:"https://github.com/ryan-xin"},"GitHub")))),l.a.createElement("div",{className:"footer_right"},!b&&l.a.createElement("p",null,l.a.createElement(c.b,{to:"/admin/login"},"Admin Login"))))),k&&o&&l.a.createElement("div",{className:"notification"},l.a.createElement("h3",null,"New Case Alert"),l.a.createElement("p",null,l.a.createElement("strong",null,"Suburb: ")),l.a.createElement("h4",null,J.suburb),l.a.createElement("p",null,l.a.createElement("strong",null,"Location: ")),l.a.createElement("h4",null,J.location),l.a.createElement("p",null,l.a.createElement("strong",null,"Date: ")),l.a.createElement("h4",null,J.day," ",J.month," ",J.year),l.a.createElement("p",null,l.a.createElement("strong",null,"Time: ")),l.a.createElement("h4",null,"From ",J.startTime," to ",J.endTime),l.a.createElement("span",{className:"button_fourth",onClick:function(e){_(!1)}},"Got it.")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(217),a(218),a(219),a(220),a(221),a(222),a(223),a(224),a(225);r.a.render(l.a.createElement(c.a,null,l.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},86:function(e,t,a){e.exports=a(226)}},[[86,1,2]]]);
//# sourceMappingURL=main.d7efe93b.chunk.js.map